package uesugi.core

enum class RouteRule(val title: String) {

    REQUEST_R18_IMAGE(
        """
        仅当用户【明确提出图片请求】时，才选择此分类。
        必须【同时满足】以下两个条件，缺一不可：

        条件一：图片内容明确指向【成人 / R18】
        例如：
        - “涩图”
        - “R18”
        - “黄图”
        - “色图”

        强制排除规则：
        - 如果内容仅包含成人、性、下流、攻击性、辱骂、玩梗等文字
        - 但【没有任何索要图片的意图或行为】
        则【绝对不要】归类为 REQUEST_R18_IMAGE。
        这种情况应优先归类为 CHAT。
        """.trimIndent()
    ),

    IMAGE_CREATE(
        """
        当用户的核心意图是【让 AI 生产/制作/定制一张图片】时，优先归类为此项。
        
        【优先级规则】：
        如果用户的意图同时涉及“涩图/R18”和“生成/画”，
        必须优先归类为 IMAGE_CREATE（视为“创作R18图片”），而不是 REQUEST_R18_IMAGE。

        判定逻辑 - 满足以下任一情况即可：

        1. 显式创作指令（动词驱动）：
           - 包含明确的生产类动词：“画”、“生成”、“捏”、“绘制”、“制作”、“咏唱”。
           - 例：“画一只猫”、“生成赛博朋克背景”、“帮我捏个头像”。

        2. 隐式定制意图（描述驱动）：
           - 用户使用了“想要一张图”、“整一张图”等模糊动词，但**紧跟了具体的画面描述**。
           - 这里的“描述”通常包含：外貌特征、动作、场景、风格、构图。
           - 例：“给我一张[白发、红瞳、拿着武士刀]的图片”（因为描述具体，视为要求生成）。
           - 例：“想要一张[初音未来在吃汉堡]的图”（场景具体，视为要求生成）。

        边界区分（Make vs Get）：
        - 场景 A（生成）：用户提供了画面配方/Prompt。
          “整一张黑丝御姐的图” -> IMAGE_CREATE（偏向定制需求）。
          “画个涩图” -> IMAGE_CREATE（动词是画）。
        
        - 场景 B（索取）：用户仅仅是在翻找库存。
          “发点黑丝御姐” -> REQUEST_R18_IMAGE / CHAT（意图是看现成的）。
          “来点涩图” -> REQUEST_R18_IMAGE（意图是看现成的）。
          “有没有美图” -> CHAT（询问库存）。

        总结：只要感觉用户是把 AI 当作【画师/生成器】使用，就选此项。
        """.trimIndent()
    ),

    DIRECT_QA(
        """
        当用户提出的是【明确、严肃、可被直接回答的问题】时，选择此分类。

        判断标准（满足任一即可）：
        - 涉及知识、技术、编程、规则、事实、概念解释
        - 需要准确答案或理性说明
        - 去掉语气和情绪后，问题本身依然成立

        DIRECT_QA 的消息应由 AI 直接回答，
        【不进入任何人格 Agent】。
        即使语气随意，只要本质是求解答，也应归类为 DIRECT_QA。
        """.trimIndent()
    ),

    CHAT(
        """
        当消息不属于 REQUEST_R18_IMAGE 或 DIRECT_QA 时，默认归类为 CHAT。

        包括但不限于：
        - 群内日常闲聊、接话、调侃
        - 情绪表达、吐槽、发泄
        - 玩梗、辱骂、攻击性语言
        - 不追求严谨或标准答案的对话

        判断要点：
        - 更偏向互动、情绪或气氛
        - 即使内容不雅、粗俗或激烈
        - 只要不是索要图片，也不是严肃求解答
        都应归类为 CHAT，并进入人格 Agent 处理。
        """.trimIndent()
    )

}
